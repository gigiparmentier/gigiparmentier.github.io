<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <link rel="icon" href="favicon.ico" />
    <title>EXPO</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/90/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>
    <script src="OrbitControls.js"></script>
    <script src="OBJLoader.js"></script>
    <script src="parallax.min.js"></script>
    <link rel="stylesheet" href="style.css" type="text/css" />
  </head>

  <body>
    <div id="footer">
      <p id="title">aüÖ±Ô∏èŒî0_ÊçüÂÆ≥-ü§†</p>
      <p id="participation"><a href="*">Participation</a></p>
      <p id="contact"><a href="*">Contact</a></p>
    </div>
    <div id="first">
      <img src="premierfond.png" />
      <div class="container" id="first-title">
        <span class="fit bold">GALLERIE PARADISE 17-9 NOV</span>
      </div>
      <div class="container">
        <span class="fit">ENTR√âE LIBRE - VERNISSAGE 17H30 JEUDI 9 NOV</span>
      </div>
      <div class="container lastcontainer">
        <span class="fit bar">Ê≠ª„Çì„Å†„ÇÇ„ÅÆ„Çí„Åô„Åπ„Å¶È£ü„Åπ„Çã</span>
      </div>
    </div>
    <div id="explications" class="parallax-window" data-parallax="scroll" data-image-src="bg.png" data-speed=".2">
      <div id="box1">
        <h3>MANIFESTE</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lacinia ante diam, id efficitur libero volutpat ut. Nulla aliquet massa eu cursus gravida. Curabitur a elit quis risus tempus congue nec at massa. Nullam
          condimentum erat id tortor tempor, luctus commodo justo blandit. Sed nec semper erat. Cras vulputate ligula vel tortor cursus efficitur ut at turpis. Integer porttitor sit amet neque ut semper. Mauris gravida in eros id porta. Maecenas
          at
          magna rutrum, porta metus nec, sodales justo. Integer condimentum enim urna, eu vestibulum tortor dictum eget. Nunc vitae posuere turpis. Ut condimentum eros at sem dignissim consectetur.
          Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis bibendum sem eget est volutpat, id euismod nulla viverra. Pellentesque non risus dictum, commodo leo eget, imperdiet libero. Fusce nec
          risus
          tortor. Mauris lacinia tortor at sapien mattis faucibus. Pellentesque gravida sem id orci sodales consectetur. Duis non facilisis urna. Integer ut orci id eros sollicitudin efficitur. Nullam sit amet mauris enim.
        </p><br/>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lacinia ante diam, id efficitur libero volutpat ut. Nulla aliquet massa eu cursus gravida. Curabitur a elit quis risus tempus congue nec at massa. Nullam
          condimentum erat id tortor tempor, luctus commodo justo blandit. Sed nec semper erat. Cras vulputate ligula vel tortor cursus efficitur ut at turpis. Integer porttitor sit amet neque ut semper. Mauris gravida in eros id porta. Maecenas
          at
          magna rutrum, porta metus nec, sodales justo. Integer condimentum enim urna, eu vestibulum tortor dictum eget. Nunc vitae posuere turpis. Ut condimentum eros at sem dignissim consectetur.
          Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis bibendum sem eget est volutpat, id euismod nulla viverra. Pellentesque non risus dictum, commodo leo eget, imperdiet libero. Fusce nec
          risus
          tortor. Mauris lacinia tortor at sapien mattis faucibus. Pellentesque gravida sem id orci sodales consectetur. Duis non facilisis urna. Integer ut orci id eros sollicitudin efficitur. Nullam sit amet mauris enim.
        </p>
        </div>
      <div id="box2">
        <h3>EXPLICATION NOM</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lacinia ante diam, id efficitur libero volutpat ut. Nulla aliquet massa eu cursus gravida. Curabitur a elit quis risus tempus congue nec at massa. Nullam
          condimentum erat id tortor tempor, luctus commodo justo blandit. Sed nec semper erat. Cras vulputate ligula vel tortor cursus efficitur ut at turpis. Integer porttitor sit amet neque ut semper. Mauris gravida in eros id porta. Maecenas
          at
          magna rutrum, porta metus nec, sodales justo. Integer condimentum enim urna, eu vestibulum tortor dictum eget. Nunc vitae posuere turpis. Ut condimentum eros at sem dignissim consectetur.
          Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis bibendum sem eget est volutpat, id euismod nulla viverra. Pellentesque non risus dictum, commodo leo eget, imperdiet libero. Fusce nec
          risus
          tortor. Mauris lacinia tortor at sapien mattis faucibus. Pellentesque gravida sem id orci sodales consectetur. Duis non facilisis urna. Integer ut orci id eros sollicitudin efficitur. Nullam sit amet mauris enim.
        </p><br/>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lacinia ante diam, id efficitur libero volutpat ut. Nulla aliquet massa eu cursus gravida. Curabitur a elit quis risus tempus congue nec at massa. Nullam
          condimentum erat id tortor tempor, luctus commodo justo blandit. Sed nec semper erat. Cras vulputate ligula vel tortor cursus efficitur ut at turpis. Integer porttitor sit amet neque ut semper. Mauris gravida in eros id porta. Maecenas
          at
          magna rutrum, porta metus nec, sodales justo. Integer condimentum enim urna, eu vestibulum tortor dictum eget. Nunc vitae posuere turpis. Ut condimentum eros at sem dignissim consectetur.
          Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis bibendum sem eget est volutpat, id euismod nulla viverra. Pellentesque non risus dictum, commodo leo eget, imperdiet libero. Fusce nec
          risus
          tortor. Mauris lacinia tortor at sapien mattis faucibus. Pellentesque gravida sem id orci sodales consectetur. Duis non facilisis urna. Integer ut orci id eros sollicitudin efficitur. Nullam sit amet mauris enim.
        </p>
        </div>
      </div>
      <div id="content">
        <h1>Point de d√©part</h1>
        <div id='par1'>
          <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lacinia ante diam, id efficitur libero volutpat ut. Nulla aliquet massa eu cursus gravida. Curabitur a elit quis risus tempus congue nec at massa. Nullam
            condimentum erat id tortor tempor, luctus commodo justo blandit. Sed nec semper erat. Cras vulputate ligula vel tortor cursus efficitur ut at turpis. Integer porttitor sit amet neque ut semper. Mauris gravida in eros id porta. Maecenas
            at
            magna rutrum, porta metus nec, sodales justo. Integer condimentum enim urna, eu vestibulum tortor dictum eget. Nunc vitae posuere turpis. Ut condimentum eros at sem dignissim consectetur.
            Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis bibendum sem eget est volutpat, id euismod nulla viverra. Pellentesque non risus dictum, commodo leo eget, imperdiet libero. Fusce nec
            risus
            tortor. Mauris lacinia tortor at sapien mattis faucibus. Pellentesque gravida sem id orci sodales consectetur. Duis non facilisis urna. Integer ut orci id eros sollicitudin efficitur. Nullam sit amet mauris enim. </p>
          <br />
          <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lacinia ante diam, id efficitur libero volutpat ut. Nulla aliquet massa eu cursus gravida. Curabitur a elit quis risus tempus congue nec at massa. Nullam
            condimentum erat id tortor tempor, luctus commodo justo blandit. Sed nec semper erat. Cras vulputate ligula vel tortor cursus efficitur ut at turpis. Integer porttitor sit amet neque ut semper. Mauris gravida in eros id porta. Maecenas
            at
            magna rutrum, porta metus nec, sodales justo. Integer condimentum enim urna, eu vestibulum tortor dictum eget. Nunc vitae posuere turpis. Ut condimentum eros at sem dignissim consectetur.
            Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis bibendum sem eget est volutpat, id euismod nulla viverra. Pellentesque non risus dictum, commodo leo eget, imperdiet libero. Fusce nec
            risus
            tortor. Mauris lacinia tortor at sapien mattis faucibus. Pellentesque gravida sem id orci sodales consectetur. Duis non facilisis urna. Integer ut orci id eros sollicitudin efficitur. Nullam sit amet mauris enim. </p>
          <br />
          <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lacinia ante diam, id efficitur libero volutpat ut. Nulla aliquet massa eu cursus gravida. Curabitur a elit quis risus tempus congue nec at massa. Nullam
            condimentum erat id tortor tempor, luctus commodo justo blandit. Sed nec semper erat. Cras vulputate ligula vel tortor cursus efficitur ut at turpis. Integer porttitor sit amet neque ut semper. Mauris gravida in eros id porta. Maecenas
            at
            magna rutrum, porta metus nec, sodales justo. Integer condimentum enim urna, eu vestibulum tortor dictum eget. Nunc vitae posuere turpis. Ut condimentum eros at sem dignissim consectetur.
            Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis bibendum sem eget est volutpat, id euismod nulla viverra. Pellentesque non risus dictum, commodo leo eget, imperdiet libero. Fusce nec
            risus
            tortor. Mauris lacinia tortor at sapien mattis faucibus. Pellentesque gravida sem id orci sodales consectetur. Duis non facilisis urna. Integer ut orci id eros sollicitudin efficitur. Nullam sit amet mauris enim. </p>
          <br />
          <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lacinia ante diam, id efficitur libero volutpat ut. Nulla aliquet massa eu cursus gravida. Curabitur a elit quis risus tempus congue nec at massa. Nullam
            condimentum erat id tortor tempor, luctus commodo justo blandit. Sed nec semper erat. Cras vulputate ligula vel tortor cursus efficitur ut at turpis. Integer porttitor sit amet neque ut semper. Mauris gravida in eros id porta. Maecenas
            at
            magna rutrum, porta metus nec, sodales justo. Integer condimentum enim urna, eu vestibulum tortor dictum eget. Nunc vitae posuere turpis. Ut condimentum eros at sem dignissim consectetur.
            Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis bibendum sem eget est volutpat, id euismod nulla viverra. Pellentesque non risus dictum, commodo leo eget, imperdiet libero. Fusce nec
            risus
            tortor. Mauris lacinia tortor at sapien mattis faucibus. Pellentesque gravida sem id orci sodales consectetur. Duis non facilisis urna. Integer ut orci id eros sollicitudin efficitur. Nullam sit amet mauris enim. </p>
        </div>
        <div id="trigger1" class="spacer s0"></div>
        <div id="pin1"></div>
        <div id="pin2"></div>
        <div id="pin3"></div>
        <div id="pin4"></div>
      </div>
      <div id="suite" class="parallax-window" data-parallax="scroll" data-image-src="trait.png" data-speed=".01" data-naturalWidth="window.innerWidth" data-naturalHeight="window.innerHeight">
        <div class="profiles">
          <div class="left">
            <h1>ARCHITECTURE<br/>BLABLA</h1>
            <img src="carre.png"/>
          </div>
          <div class="right">
            <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lacinia ante diam, id efficitur libero volutpat ut. Nulla aliquet massa eu cursus gravida. Curabitur a elit quis risus tempus congue nec at massa. Nullam
              condimentum erat id tortor tempor, luctus commodo justo blandit. Sed nec semper erat. Cras vulputate ligula vel tortor cursus efficitur ut at turpis. Integer porttitor sit amet neque ut semper. Mauris gravida in eros id porta. Maecenas
              at
              magna rutrum, porta metus nec, sodales justo. Integer condimentum enim urna, eu vestibulum tortor dictum eget. Nunc vitae posuere turpis. Ut condimentum eros at sem dignissim consectetur.
              Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis bibendum sem eget est volutpat, id euismod nulla viverra. Pellentesque non risus dictum, commodo leo eget, imperdiet libero. Fusce nec
              risus
              tortor. Mauris lacinia tortor at sapien mattis faucibus. Pellentesque gravida sem id orci sodales consectetur. Duis non facilisis urna. Integer ut orci id eros sollicitudin efficitur. Nullam sit amet mauris enim. </p>
              <br />
            <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lacinia ante diam, id efficitur libero volutpat ut. Nulla aliquet massa eu cursus gravida. Curabitur a elit quis risus tempus congue nec at massa. Nullam
              condimentum erat id tortor tempor, luctus commodo justo blandit. Sed nec semper erat. Cras vulputate ligula vel tortor cursus efficitur ut at turpis. Integer porttitor sit amet neque ut semper. Mauris gravida in eros id porta. Maecenas
              at
              magna rutrum, porta metus nec, sodales justo. Integer condimentum enim urna, eu vestibulum tortor dictum eget. Nunc vitae posuere turpis. Ut condimentum eros at sem dignissim consectetur.
              Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis bibendum sem eget est volutpat, id euismod nulla viverra. Pellentesque non risus dictum, commodo leo eget, imperdiet libero. Fusce nec
              risus
              tortor. Mauris lacinia tortor at sapien mattis faucibus. Pellentesque gravida sem id orci sodales consectetur. Duis non facilisis urna. Integer ut orci id eros sollicitudin efficitur. Nullam sit amet mauris enim. </p>
              <br />
            </div>
          </div>
          <div class="profiles">
            <div class="left">
              <h1>DIAGRAMS</h1>
              <img src="carre.png"/>
            </div>
            <div class="right">
              <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lacinia ante diam, id efficitur libero volutpat ut. Nulla aliquet massa eu cursus gravida. Curabitur a elit quis risus tempus congue nec at massa. Nullam
                condimentum erat id tortor tempor, luctus commodo justo blandit. Sed nec semper erat. Cras vulputate ligula vel tortor cursus efficitur ut at turpis. Integer porttitor sit amet neque ut semper. Mauris gravida in eros id porta. Maecenas
                at
                magna rutrum, porta metus nec, sodales justo. Integer condimentum enim urna, eu vestibulum tortor dictum eget. Nunc vitae posuere turpis. Ut condimentum eros at sem dignissim consectetur.
                Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis bibendum sem eget est volutpat, id euismod nulla viverra. Pellentesque non risus dictum, commodo leo eget, imperdiet libero. Fusce nec
                risus
                tortor. Mauris lacinia tortor at sapien mattis faucibus. Pellentesque gravida sem id orci sodales consectetur. Duis non facilisis urna. Integer ut orci id eros sollicitudin efficitur. Nullam sit amet mauris enim. </p>
                <br />
              <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lacinia ante diam, id efficitur libero volutpat ut. Nulla aliquet massa eu cursus gravida. Curabitur a elit quis risus tempus congue nec at massa. Nullam
                condimentum erat id tortor tempor, luctus commodo justo blandit. Sed nec semper erat. Cras vulputate ligula vel tortor cursus efficitur ut at turpis. Integer porttitor sit amet neque ut semper. Mauris gravida in eros id porta. Maecenas
                at
                magna rutrum, porta metus nec, sodales justo. Integer condimentum enim urna, eu vestibulum tortor dictum eget. Nunc vitae posuere turpis. Ut condimentum eros at sem dignissim consectetur.
                Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis bibendum sem eget est volutpat, id euismod nulla viverra. Pellentesque non risus dictum, commodo leo eget, imperdiet libero. Fusce nec
                risus
                tortor. Mauris lacinia tortor at sapien mattis faucibus. Pellentesque gravida sem id orci sodales consectetur. Duis non facilisis urna. Integer ut orci id eros sollicitudin efficitur. Nullam sit amet mauris enim. </p>
                <br />
              </div>
            </div>
      </div>
      <div id="fin"></div>
      <div id="rendercontainer"></div>
      <script>
        $('#title').click(function() {
          $("html, body").animate({
            scrollTop: 0
          }, "slow");
        });
        setTimeout(function () {
          triangle();
        }, 100);
        var scenee;
        var controller = new ScrollMagic.Controller();
        $( document ).ready(function() {
          $("#explications").height($('#box1').height() + $('#box2').height() + 500);
          $("#suite").height($('.right:first').height() * 2 + 500);
          $(".fit").each(function() {
            $(this).css("transform", "scale(" + ($(this).parent().innerWidth() / $(this).width()) + ")");
          });

        });

        function triangle(){
          var w = window.innerWidth;
          var ratio = 1000 * w / 1920;
          var ratio = $('#par1').height() - parseInt($('#pin1').css('height').replace('px', '')) * (w / 1920 / 2) - $('#pin1').height() / 4;
          var offsetVal = 50;
          $('#trigger1').css('top', document.getElementById('content').offsetTop + parseInt($('#pin1').css('height').replace('px', '')) * (w / 1920 / 2) + 'px');
          scenee = new ScrollMagic.Scene({
              triggerElement: "#trigger1",
              duration: ratio,
              offset: offsetVal
            })
            /*
            .addIndicators({
              name: "1 (duration: " + ratio + ")"
            })
            */
            .setPin("#pin1")
            .addTo(controller);
          scenee2 = new ScrollMagic.Scene({
              triggerElement: "#trigger1",
              duration: ratio,
              offset: offsetVal
            })
            .setPin("#pin2")
            .addTo(controller);
          scenee3 = new ScrollMagic.Scene({
              triggerElement: "#trigger1",
              duration: ratio,
              offset: offsetVal
            })
            .setPin("#pin3")
            .addTo(controller);
          scenee4 = new ScrollMagic.Scene({
              triggerElement: "#trigger1",
              duration: ratio,
              offset: offsetVal
            })
            .setPin("#pin4")
            .addTo(controller);
          scenee.on("progress", function(event) {
            if (event.progress < 0.25) {
              $('#pin1').css('opacity', '1');
              $('#pin2').css('opacity', '0');
              $('#pin3').css('opacity', '0');
              $('#pin4').css('opacity', '0');
              $('#trait').css('opacity','0');
            } else if (event.progress < 0.5) {
              $('#pin1').css('opacity', '1');
              $('#pin2').css('opacity', '1');
              $('#pin3').css('opacity', '0');
              $('#pin4').css('opacity', '0');
              $('#trait').css('opacity','0');
            } else if (event.progress < 0.75) {
              $('#pin1').css('opacity', '1');
              $('#pin2').css('opacity', '1');
              $('#pin3').css('opacity', '1');
              $('#pin4').css('opacity', '0');
              $('#trait').css('opacity','0');
            } else if (event.progress < 1){
              $('#pin1').css('opacity', '1');
              $('#pin2').css('opacity', '1');
              $('#pin3').css('opacity', '1');
              $('#pin4').css('opacity', '1');
              $('#trait').css('opacity','0');
            }
          });
        }

        $(window).bind("resize", function() {
          $("#explications").height($('#box1').height() + $('#box2').height() + 500);
          $('#explications').parallax({imageSrc:'bg.png'});
          $(".fit").each(function() {
            $(this).css("transform", "scale(" + ($(this).parent().innerWidth() / $(this).width()) + ")");
          });
          var w = window.innerWidth;
          var ratio = 1000 * w / 1920;
          var ratio = $('#par1').height() - parseInt($('#pin1').css('height').replace('px', '')) * (w / 1920 / 2) - $('#pin1').height() / 4;
          var offsetVal = 50;
          $('#trigger1').css('top', document.getElementById('content').offsetTop + parseInt($('#pin1').css('height').replace('px', '')) * (w / 1920 / 2) + 'px');
          scenee.duration(ratio);
          scenee2.duration(ratio);
          scenee3.duration(ratio);
          scenee4.duration(ratio);
        });


        var mouse = new THREE.Vector2(),
          INTERSECTED;
        var intersects, clicked;
        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera(1, 1000 / 750, 1, 10000);
        camera.position.set(0, 500, 700);
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        var renderer = new THREE.WebGLRenderer({
          antialias: true,
          alpha: true
        });
        var raycaster = new THREE.Raycaster();
        renderer.setSize(window.innerWidth, window.innerHeight);
        controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.enablePan = false;
        controls.dampingFactor = 0.2;
        controls.rotateSpeed = 0.2;
        controls.enableZoom = true;
        controls.minPolarAngle = 0;
        controls.maxPolarAngle = Math.PI / 2;
        controls.update();
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.domElement.addEventListener("click", onclick, true);
        window.addEventListener('resize', onWindowResize, false);

        canvas = $('#rendercontainer').append(renderer.domElement);
        renderer.domElement.addEventListener('mousemove', onDocumentMouseMove, false);
        renderer.domElement.addEventListener('click', onDocumentMouseUp, false);
        renderer.domElement.addEventListener("touchstart", onDocumentTouch, false);
        renderer.domElement.addEventListener("touchmove", onDocumentTouch, false);
        renderer.domElement.addEventListener("touchend", onDocumentMouseUp, false);
        canvas.id = "render";

        var matY = new THREE.MeshBasicMaterial({
          color: 'pink',
          side: THREE.DoubleSide
        });
        var matB = new THREE.MeshBasicMaterial({
          color: 'black',
          side: THREE.DoubleSide
        });
        var matG = new THREE.MeshBasicMaterial({
          color: 'cyan',
          side: THREE.DoubleSide
        });
        var matT = new THREE.MeshBasicMaterial({
          color: 'cyan',
          side: THREE.DoubleSide,
          opacity: 0,
          transparent: true
        });
        c3 = null;
        objs = [];
        SpawnCar();
        render();


        function SpawnCar() {
          var objLoader = new THREE.OBJLoader();
          objLoader.load('sceno1.obj', function(obj) {
            obj.traverse(function(child) {
              if (child instanceof THREE.Mesh) {
                child.material = matB;
                objs.push(child);
              }
            });
            scene.add(obj);
          });
          objLoader.load('sceno2.obj', function(obj) {
            obj.traverse(function(child) {
              if (child instanceof THREE.Mesh) {
                child.material = matY;
                objs.push(child);
              }
            });
            scene.add(obj);
          });
          objLoader.load('text.obj', function(obj) {
            obj.traverse(function(child) {
              if (child instanceof THREE.Mesh) {
                child.geometry.rotateX(Math.PI / 2);
                child.geometry.center();
                child.material = matT;
                scene.add(child);
                c3 = child;
              }
            });
          });
        }

        function onWindowResize() {
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(window.innerWidth, window.innerHeight);
        }


        function render() {
          if (c3 != null) {
            c3.quaternion.copy(camera.quaternion);
          }
          raycaster.setFromCamera(mouse, camera);
          canvas = document.getElementById('rendercontainer').getElementsByTagName('canvas')[0];;
          if (scene.children.length == 3) {
            intersects = raycaster.intersectObjects(objs, true);
            if (intersects.length > 0) {
              if (INTERSECTED != intersects[0].object) {
                canvas.style.cursor = 'pointer';
                if (INTERSECTED && clicked != INTERSECTED) INTERSECTED.material = INTERSECTED.currentHex;
                INTERSECTED = intersects[0].object;
                if (INTERSECTED.currentHex != matG) INTERSECTED.currentHex = INTERSECTED.material;
                INTERSECTED.material = matG;
              }
            } else {
              if (INTERSECTED && clicked != INTERSECTED) INTERSECTED.material = INTERSECTED.currentHex;
              INTERSECTED = null;
              canvas.style.cursor = 'grab';
            }
          }
          window.requestAnimationFrame(render);
          controls.update();
          renderer.render(scene, camera);
        }

        /*var observer = new IntersectionObserver(function(entries) {
        	if(entries[0].isIntersecting === true)
        		console.log('Element is fully visible in screen');
        }, { threshold: [1] });*/

        //observer.observe(document.querySelector("#main-container"));

        function onDocumentMouseMove(event) {
          event.preventDefault();
          mouse.x = (event.offsetX / renderer.domElement.clientWidth) * 2 - 1;
          mouse.y = -(event.offsetY / renderer.domElement.clientHeight) * 2 + 1;
        }

        function onDocumentTouch(event) {
          event.preventDefault();
          event.offsetX = event.touches[0].pageX;
          event.offsetY = event.touches[0].pageY - document.getElementById('rendercontainer').offsetTop;
          mouse.x = (event.offsetX / renderer.domElement.clientWidth) * 2 - 1;
          mouse.y = -(event.offsetY / renderer.domElement.clientHeight) * 2 + 1;
        }

        function onDocumentMouseUp(event) {
          event.preventDefault();
          for (var obj in objs) {
            obj = objs[obj];
            if (obj != clicked) {
              if (obj.parent.materialLibraries[0] == 'sceno1.mtl') { // A CHANGER
                obj.material = matB;
              } else {
                obj.material = matY;
              }
            }
          }
          if (intersects.length > 0) {
            if (intersects[0].object != clicked) {
              clicked = intersects[0].object;
              for (var obj in objs) {
                obj = objs[obj];
                if (obj != clicked) {
                  if (obj.parent.materialLibraries[0] == 'sceno1.mtl') { // A CHANGER
                    obj.material = matB;
                  } else {
                    obj.material = matY;
                  }
                }
              }
              clicked.material = matG;
              c3.position.set(clicked.geometry.boundingSphere.center.x, clicked.geometry.boundingSphere.center.y + .5, clicked.geometry.boundingSphere.center.z);
              c3.material.opacity = 1;
              c3.material.transparent = false;
            } else {
              console.log('rentrer');
            }
          }
        }
      </script>
  </body>

</html>
